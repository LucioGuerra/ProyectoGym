<app-drawer>
  <ng-container main-content>
    <div class="container">
      <mat-card>

        <mat-card-header>
          <div class="photo">
            <img [src]="this.userModel().picture" alt="User Image" class="user-avatar-img">
          </div>

          <div class="info">
            <div class="name">{{ userModel().firstName }} {{ userModel().lastName }}</div>
            <div class="email"> {{ userModel().email }}</div>
            <div class="dni">DNI: {{ userModel().dni }}</div>
            <div class="edit">
              <button (click)="editUser(userModel().id ?? 0)" class="button">Edit</button>
            </div>
          </div>

          <div class="streak">
            <!--Ac√° despu√©s se agrega un if en base a las asistencias-->
            <mat-card>
              <div class="text">Meses activo: 22 üî•</div>
            </mat-card>
          </div>
        </mat-card-header>


        <mat-card-content>
          <div class="content">
            <div class="title">
              <h1>Last appointments</h1>
            </div>
            <mat-divider></mat-divider>

            <div class="iterables">
              <div class="appointments">
                <div class="scrollable-section">

                  <mat-action-list>
                    <div class="appointment-table">
                      <table mat-table [dataSource]="userAppointments()" class="appointment-table">
                        <ng-container matColumnDef="date">
                          <th mat-header-cell *matHeaderCellDef> Date</th>
                          <td mat-cell *matCellDef="let appointment">
                              <div class="appointment-title">
                                <p class="date">
                                  @switch (appointment.date.getDay()) {
                                    @case (1) {
                                      Lunes
                                    }
                                    @case (2) {
                                      Martes
                                    }
                                    @case (3) {
                                      Miercoles
                                    }
                                    @case (4) {
                                      Jueves
                                    }
                                    @case (5) {
                                      Viernes
                                    }
                                    @case (6) {
                                      Sabado
                                    }
                                    @case (0) {
                                      Domingo
                                    }
                                  } {{ appointment.date.getDate() }} de
                                  @switch (appointment.date.getMonth()) {
                                    @case (0) {
                                      Enero
                                    }
                                    @case (1) {
                                      Febrero
                                    }
                                    @case (2) {
                                      Marzo
                                    }
                                    @case (3) {
                                      Abril
                                    }
                                    @case (4) {
                                      Mayo
                                    }
                                    @case (5) {
                                      Junio
                                    }
                                    @case (6) {
                                      Julio
                                    }
                                    @case (7) {
                                      Agosto
                                    }
                                    @case (8) {
                                      Septiembre
                                    }
                                    @case (9) {
                                      Octubre
                                    }
                                    @case (10) {
                                      Noviembre
                                    }
                                    @case (11) {
                                      Diciembre
                                    }
                                  } de
                                  {{ appointment.date.getFullYear() }}
                                </p>
                                <p class="time">
                                  {{ appointment.startTime }} - {{ appointment.endTime }}
                                </p>
                              </div>
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="activity">
                          <th mat-header-cell *matHeaderCellDef> No.</th>
                          <td mat-cell *matCellDef="let appointment">
                            <div class="card-container">
                              <mat-chip class="appointment-activity-card">{{
                                  appointment.activity
                                }}
                              </mat-chip>
                            </div>
                          </td>
                        </ng-container>

                        <tr
                        mat-row
                        *matRowDef="let row; columns: displayedColumns;"
                        ></tr>

                      </table>

                    </div>
                    @if (userAppointments().length == 0) {
                      <button mat-list-item>
                        <div class="no-apointments">
                          <p>El usuario no se ha a√±adido a ning√∫n turno todav√≠a</p>
                        </div>
                      </button>
                    }
                  </mat-action-list>

                </div>

              </div>
              <div class="divider"></div>
              <div class="packages">

              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </ng-container>
</app-drawer>
